<!-- /usr/local/ispconfig/interface/web/templates/redis_list.htm -->
<script type="text/javascript">
function editRedis(id) {
    loadContent('sites/redis_edit.php?id=' + id);
}

function deleteRedis(id, confirmMsg) {
    if(confirm(confirmMsg)) {
        loadContent('sites/redis_del.php?id=' + id);
    }
}
</script>

<div class="page-header">
    <h1><tmpl_var name="list_head_txt"></h1>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">
            <tmpl_var name="list_head_txt">
            <div class="pull-right">
                <button type="button" class="btn btn-sm btn-success" onclick="loadContent('sites/redis_edit.php');">
                    <i class="fa fa-plus"></i> <tmpl_var name="btn_add_txt">
                </button>
            </div>
        </h3>
    </div>
    
    <div class="panel-body">
        <tmpl_if name="records">
        <div class="table-responsive">
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th><tmpl_var name="redis_name_txt"></th>
                        <th><tmpl_var name="redis_port_txt"></th>
                        <th><tmpl_var name="redis_optimization_txt"></th>
                        <th><tmpl_var name="redis_memory_txt"></th>
                        <th><tmpl_var name="redis_status_txt"></th>
                        <tmpl_if name="is_admin">
                        <th>Client</th>
                        <th>Server</th>
                        </tmpl_if>
                        <th class="text-right">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tmpl_loop name="records">
                    <tr>
                        <td><strong><tmpl_var name="redis_name"></strong></td>
                        <td><span class="label label-info"><tmpl_var name="redis_port"></span></td>
                        <td>
                            <tmpl_if name="redis_optimization_mode" op="==" value="cache">
                                <span class="label label-default">Cache</span>
                            <tmpl_elseif name="redis_optimization_mode" op="==" value="fullpage">
                                <span class="label label-primary">Full Page</span>
                            <tmpl_elseif name="redis_optimization_mode" op="==" value="session">
                                <span class="label label-warning">Session</span>
                            <tmpl_else>
                                <span class="label label-secondary">Custom</span>
                            </tmpl_if>
                        </td>
                        <td><tmpl_var name="redis_maxmemory"></td>
                        <td>
                            <tmpl_if name="active" op="==" value="y">
                                <span class="label label-success"><tmpl_var name="active_txt"></span>
                            <tmpl_else>
                                <span class="label label-danger"><tmpl_var name="inactive_txt"></span>
                            </tmpl_if>
                        </td>
                        <tmpl_if name="is_admin">
                        <td><tmpl_var name="company_name"></td>
                        <td><tmpl_var name="server_name"></td>
                        </tmpl_if>
                        <td class="text-right">
                            <div class="btn-group btn-group-sm">
                                <button type="button" class="btn btn-default" data-redis-id="<tmpl_var name='redis_id'>" onclick="editRedis(this.getAttribute('data-redis-id'));" title="<tmpl_var name='btn_edit_txt'>">
                                    <i class="fa fa-pencil"></i>
                                </button>
                                <button type="button" class="btn btn-danger" data-redis-id="<tmpl_var name='redis_id'>" data-confirm="<tmpl_var name='confirm_delete_txt'>" onclick="deleteRedis(this.getAttribute('data-redis-id'), this.getAttribute('data-confirm'));" title="<tmpl_var name='btn_delete_txt'>">
                                    <i class="fa fa-trash"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                    </tmpl_loop>
                </tbody>
            </table>
        </div>
        <tmpl_else>
        <div class="alert alert-info">
            <i class="fa fa-info-circle"></i> No Redis instances found. 
            <a href="#" onclick="loadContent('sites/redis_edit.php');">Create your first Redis instance</a>.
        </div>
        </tmpl_if>
    </div>
</div>